## API

### API列表

- [获取用户信息](#获取用户信息)
- [获取用户任务列表](#获取用户任务列表)
- [获取用户发布的任务](#获取用户发布的任务)
- [获取用户任务列表](#获取用户任务列表)
- [获取用户任务列表](#获取用户任务列表)
- [获取用户任务列表](#获取用户任务列表)
- [获取用户任务列表](#获取用户任务列表)
- [获取用户任务列表](#获取用户任务列表)

### 获取用户信息

<a name="获取用户信息"></a>

**函数名：get_profile_by_user_id**

**接收参数**

| 类型 | 名称    | 备注   |
| ---- | ------- | ------ |
| int  | user_id | 用户id |

**返回参数**

| 类型                 | 名称 | 备注                                                         |
| -------------------- | ---- | ------------------------------------------------------------ |
| QuerySet（类似List） |      | 返回用户信息，包括user_id(int)、points(int)、tel(char 11位)、create_at(timestamp)、update(timestamp) |

### 获取用户任务列表

**函数名：get_task_by_task_id**

**接收参数**

| 类型 | 名称 | 备注   |
| ---- | ---- | ------ |
| int  | id   | 任务id |

**返回参数**

| 类型     | 名称 | 备注                                                         |
| -------- | ---- | ------------------------------------------------------------ |
| QuerySet |      | 返回任务列表，包括owner_id(int) name(char) reward(int) create_at(timestamp) update_at(timestamp) status(int) |

### 获取用户发布的任务

**函数名：get_task_owner_id**

**接收参数**

| 类型 | 名称     | 备注         |
| ---- | -------- | ------------ |
| int  | owner_id | 即拥有者的id |

**返回参数**

| 类型     | 名称 | 备注                                                         |
| -------- | ---- | ------------------------------------------------------------ |
| QuerySet |      | 返回任务列表，包括owner_id(int) name(char) reward(int) create_at(timestamp) update_at(timestamp) status(int) |

### 获取用户领取的任务

**函数名：get_tasks_by_receiver_id**

**接收参数**

| 类型 | 名称    | 备注 |
| ---- | ------- | ---- |
| int  | user_id |      |

**返回参数**

| 类型     | 名称 | 备注                                                         |
| -------- | ---- | ------------------------------------------------------------ |
| QuerySet |      | 返回所有任务列表，每个任务包括owner_id(int) name(char) reward(int) create_at(timestamp) update_at(timestamp) status(int) |

### 获取任务的领取请求

**函数名：get_requests_by_task**

**接收参数**

| 类型 | 名称    | 备注 |
| ---- | ------- | ---- |
| int  | task_id |      |

**返回参数**

| 类型     | 名称 | 备注                                                   |
| -------- | ---- | ------------------------------------------------------ |
| QuerySet |      | 返回任务请求，包括task_id user_id create_at(timestamp) |



### 创建用户信息

**函数名：create_profile**

**接收参数**

| 类型 | 名称    | 备注 |
| ---- | ------- | ---- |
| int  | user_id |      |

**返回参数**

| 类型 | 名称 | 备注           |
| ---- | ---- | -------------- |
| NULL |      | 在数据库中创建 |

### 创建任务

**函数名：create_task**

**接收参数**

| 类型  | 名称     | 备注 |
| ----- | -------- | ---- |
| int   | owner_id |      |
| char* | name     |      |
| int   | reward   |      |

**返回参数**

| 类型 | 名称 | 备注 |
| ---- | ---- | ---- |
| NULL |      |      |

### 发送领取任务申请

**函数名：request_task**

**接收参数**

| 类型 | 名称    | 备注 |
| ---- | ------- | ---- |
| int  | user_id |      |
| int  | task_id |      |

**返回参数**

| 类型     | 名称 | 备注           |
| -------- | ---- | -------------- |
| QuerySet |      | 返回request_id |

### 允许通过任务申请

**函数名：allow_request_task**

**接收参数**

| 类型 | 名称       | 备注 |
| ---- | ---------- | ---- |
| int  | request_id |      |

**返回参数**

| 类型 | 名称 | 备注                     |
| ---- | ---- | ------------------------ |
| NULL |      | 在数据库中新增receiver行 |

### 拒绝验收任务

**函数名：reject_task**

**接收参数**

| 类型 | 名称    | 备注 |
| ---- | ------- | ---- |
| int  | task_id |      |

**返回参数**

| 类型 | 名称 | 备注                                     |
| ---- | ---- | ---------------------------------------- |
| NULL |      | 重设task为created、标记receive为rejected |

### 完成任务

**函数名：finish_task**

**接收参数**

| 类型 | 名称    | 备注 |
| ---- | ------- | ---- |
| int  | task_id |      |

**返回参数**

| 类型 | 名称 | 备注 |
| ---- | ---- | ---- |
| NULL |      |      |



### 验收完成的任务

**函数名：get_task_by_id**

**接收参数**

| 类型 | 名称    | 备注 |
| ---- | ------- | ---- |
| int  | task_id |      |

**返回参数**

| 类型 | 名称 | 备注                           |
| ---- | ---- | ------------------------------ |
| NULL |      | 数据库中更改task 、receive状态 |

### 重置任务状态
**函数名：backtrack_task**

| 类型 | 名称    | 备注 |
| ---- | ------- | ---- |
| int  | task_id |      |

**返回参数**

| 类型 | 名称 | 备注                                                         |
| ---- | ---- | ------------------------------------------------------------ |
| NULL |      | 数据库中重设task为created，将与该task有关的所有receive设为异常中断 |